#![not_v1]

#[link = "brad_array_len"]
extern fn len<'a> (list: ['a]) -> int

#[link = "brad_array_concat"]
extern fn concat<'a> (pre: ['a]) (post: ['a]) -> ['a]

fn prepend<'a> (item: 'a) (xs: ['a]) -> ['a] {
  concat<'a> [item] xs
}

fn append<'a> (xs: ['a]) (item: 'a) -> ['a] {
  concat<'a> xs [item]
}

fn iter<'a> (xs: ['a]) -> std::iter<'a> {
  std::iter (iter-impl 0 xs)
}

fn iter-impl<'a> (i: int) (xs: ['a]) (_: none) -> 'a * std::iter<'a> | none {
  match i < len xs
  | false => none
  | true  => xs[i], std::iter (iter-impl (i + 1) xs)
}
